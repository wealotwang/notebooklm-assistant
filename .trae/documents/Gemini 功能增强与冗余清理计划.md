# Gemini 功能增强与冗余清理计划

## 1. 冗余清理：移除 Gem 菜单中的“移动到文件夹”
*   **现象**：目前在 Gems 列表点击菜单时，仍会出现“移动到文件夹”选项。
*   **修复方案**：
    *   在 `injectMenuItem` 函数中增加判断。
    *   利用 `state.lastClickedButton` 追溯触发菜单的按钮。
    *   如果该按钮位于 `gems-list-container` 或链接包含 `/gem/`，则不进行菜单注入。

## 2. 新功能：共享 Gem 收藏 (Pinned Shared Gems)
*   **功能目标**：允许用户将通过链接打开的外部共享 Gem 固定在侧边栏，避免重复查找链接。
*   **技术实现**：
    *   **数据存储**：在 `state` 中新增 `sharedGems` 数组，存储格式为 `{ id, name, url }`。
    *   **自动探测与固定**：
        *   当用户访问 `gemini.google.com/gem/...` 格式的共享链接时，在界面上方（或侧边栏顶部）注入一个“固定此共享 Gem”的按钮。
        *   点击后，将该 Gem 的标题和 URL 保存到本地存储。
    *   **侧边栏展示**：
        *   在“文件夹分类”上方新增“共享给我的 Gem”区域。
        *   **动态显示**：仅当 `sharedGems` 数组不为空时显示该区域。
        *   **交互**：点击列表项直接跳转到对应的共享链接；提供删除按钮以便取消固定。

## 3. UI 布局优化
*   **位置控制**：确保“共享给我的 Gem”区域始终位于“文件夹分类”之上。
*   **样式适配**：匹配 Gemini 原生侧边栏风格，支持侧边栏折叠时自动隐藏。

## 4. 版本管理
*   **版本号**：更新 `manifest.json` 至 `3.0.0.17`。
*   **Git 记录**：提交记录包含 `feat(gemini): add shared gems pinning and remove gem folder menu`。

**是否允许我按照此计划开始执行？**
