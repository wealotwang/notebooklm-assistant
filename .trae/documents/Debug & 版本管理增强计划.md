# Debug & 版本管理增强计划

为了解决“未生效”的问题并建立更稳健的开发流程，我制定了以下计划：

## 1. 增强诊断与日志 (Debug Mode)
目前的 `timeline.js` 初始化逻辑可能过于简单，无法应对 NotebookLM 复杂的动态加载机制。我们将进行以下改进：
*   **增加详细日志**：在关键步骤（脚本加载、查找容器、查找消息、计算位置）添加带 `[NLM Timeline]` 前缀的 `console.log`，方便在控制台过滤查看。
*   **优化初始化逻辑**：
    *   废弃简单的 `setTimeout` 重试。
    *   引入 **"DOM 哨兵"** 机制：使用 `MutationObserver` 监听 `document.body`，直到 `.chat-panel-content` 真正出现在页面上再启动时间轴，防止脚本执行过早导致的失败。
*   **增加视觉反馈**：如果初始化失败或找不到元素，在控制台输出醒目的警告。

## 2. 版本控制与发布规范 (Version Control)
为了保障代码安全和可追溯性，我们将执行严格的版本管理：
*   **版本号升级**：将 `manifest.json` 中的版本号从 `2.1.17` 升级到 `2.1.18`。
*   **更新 CHANGELOG**：在 `CHANGELOG.md` 中详细记录本次变更（Timeline 功能的加入），并标记为 `Beta` 或 `Experimental`。
*   **保障措施**：
    *   我们使用 Git 进行版本管理。每一次 Tool 调用后的自动 Commit 就是我们的“快照”。
    *   如果新版本有问题，您可以通过 Git 命令（或让我执行）快速回滚到上一个 Commit。

## 3. 具体执行步骤
1.  **修改 `timeline.js`**：重写初始化函数，加入 Observer 哨兵模式和详细日志。
2.  **修改 `manifest.json`**：更新版本号。
3.  **更新 `CHANGELOG.md`**：记录更新日志。
4.  **Git 提交**：将所有变更打包提交，确保有一个干净的还原点。

**准备好后，请批准计划，我将立即执行代码修改。**