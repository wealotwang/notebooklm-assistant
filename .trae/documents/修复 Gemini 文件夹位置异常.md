# Gemini æ·±åº¦ä¼˜åŒ–è®¡åˆ’ï¼šä½ç½®é”šå®šä¸è§†è§‰èåˆ

## 1. æ ¸å¿ƒç›®æ ‡

å“åº”æ‚¨çš„æœ€æ–°åé¦ˆï¼Œæˆ‘ä»¬å°†é‡ç‚¹è§£å†³ä¸‰ä¸ªé—®é¢˜ï¼š

1. **ç²¾å‡†å®šä½**: å°†æ–‡ä»¶å¤¹ UI çš„æ’å…¥é”šç‚¹ä»â€œChats åˆ—è¡¨å‰â€æ”¹ä¸º **"Gems åˆ—è¡¨å"**ã€‚è¿™èƒ½ç¡®ä¿ UI ç¨³å›ºåœ°å¤„äº Gems å’Œ Chats ä¹‹é—´çš„åˆ†éš”åŒºåŸŸï¼ˆå³æ‚¨æåˆ°çš„â€œä¸¤ä¸ªå¹å·ä¹‹é—´â€çš„é€»è¾‘åŒºåŸŸï¼‰ï¼Œé¿å…è§†è§‰ä¸Šçš„é”™ä½ã€‚
2. **è§†è§‰èåˆ**: å»é™¤ç™½è‰²èƒŒæ™¯å—ï¼Œå®ç°**å…¨é€æ˜åŒ–**è®¾è®¡ï¼Œè®©æ–‡ä»¶å¤¹åƒæ˜¯ Gemini åŸç”Ÿç”Ÿé•¿å‡ºæ¥çš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯è´´ä¸Šå»çš„è¡¥ä¸ã€‚
3. **æ—¶é—´è½´ä¿®å¤**: è§£å†³åˆ·æ–°åæ—¶é—´è½´æ¶ˆå¤±çš„é—®é¢˜ã€‚

## 2. æŠ€æœ¯æ–¹æ¡ˆ

### ğŸ“ A. å®šä½ç­–ç•¥ï¼šGems-First Anchor

* **æ—§é€»è¾‘**: æ‰¾åˆ° `Chat History` -> æ’åœ¨å®ƒå‰é¢ã€‚

* **æ–°é€»è¾‘**:

  1. ä¼˜å…ˆå¯»æ‰¾ `.gems-list-container` (Gems åˆ—è¡¨)ã€‚
  2. å¦‚æœæ‰¾åˆ° Gemsï¼Œå°†æ–‡ä»¶å¤¹ UI æ’å…¥åˆ° **Gems å®¹å™¨çš„åé¢** (`insertAfter`)ã€‚è¿™æ ·å®ƒè‡ªç„¶å°±ä½äº Gems å’Œåç»­å†…å®¹ï¼ˆæ³¨é‡ŠèŠ‚ç‚¹/Chatsï¼‰ä¹‹é—´ã€‚
  3. å¦‚æœæ‰¾ä¸åˆ° Gemsï¼ˆä¾‹å¦‚ç”¨æˆ·æ²¡æœ‰ Gemsï¼‰ï¼Œåˆ™å›é€€åˆ°æ’åœ¨ `.chat-history` çš„å‰é¢ã€‚

  * *æ³¨ï¼šè¿™ç§ç­–ç•¥æ¯”å»æ•°â€œå¹å·â€ï¼ˆæ³¨é‡ŠèŠ‚ç‚¹ï¼‰çš„æ•°é‡æ›´å¥å£®ï¼Œå› ä¸ºæ³¨é‡ŠèŠ‚ç‚¹åœ¨ Angular ä¸­æ˜¯ä¸ç¨³å®šçš„ã€‚*

### ğŸ¨ B. è§†è§‰é€æ˜åŒ– (Transparent UI)

ä¿®æ”¹ `styles.css`ï¼š

* **å®¹å™¨èƒŒæ™¯**: `.nlm-folder-container` -> `background-color: transparent; border-bottom: none;`

* **æ–‡ä»¶å¤¹èƒ¶å›Š**:

  * é»˜è®¤: åŠé€æ˜ç™½è‰²èƒŒæ™¯ `rgba(255, 255, 255, 0.6)` + ç»†å¾®è¾¹æ¡†ã€‚

  * æ‚¬åœ: ç•¥å¾®åŠ æ·± `rgba(255, 255, 255, 0.9)`ã€‚

  * Dark Mode: åŠé€æ˜æ·±è‰²èƒŒæ™¯ `rgba(0, 0, 0, 0.3)`ã€‚

* **é—´è·è°ƒæ•´**: æ—¢ç„¶å»æ‰äº†ç™½è‰²èƒŒæ™¯æ¡ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ç‚¹ `margin-bottom`ï¼Œè®©æ–‡ä»¶å¤¹å’Œä¸‹æ–¹çš„ Chats åˆ—è¡¨ä¿æŒå‘¼å¸æ„Ÿã€‚

### ğŸ›  C. æ—¶é—´è½´ç¨³å®šæ€§ (Timeline Resilience)

ä¿®æ”¹ `timeline_gemini.js`ï¼š

* å¼•å…¥ `TimelineLifecycle` ç®¡ç†å™¨ã€‚

* ä½¿ç”¨ `MutationObserver` æŒç»­ç›‘å¬ `body`ã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ—¶é—´è½´è¢«ç§»é™¤ï¼ˆä¾‹å¦‚é¡µé¢é‡ç»˜ï¼‰ï¼Œä¸”æ»šåŠ¨å®¹å™¨ä¾ç„¶å­˜åœ¨ï¼Œç«‹å³**å¤æ´»**æ—¶é—´è½´ç»„ä»¶ã€‚

## 3. æ‰§è¡Œæ­¥éª¤

1. **Refactor CSS**: å®ç°é€æ˜åŒ–æ ·å¼ã€‚
2. **Update Content Script**: ä¿®æ”¹ `injectFolderUI` å®ç° Gems-First æ’å…¥ç­–ç•¥ã€‚
3. **Update Timeline Script**: å¢åŠ æŒä¹…åŒ–ä¿æ´»é€»è¾‘ã€‚
4. **Release**: æ›´æ–°ç‰ˆæœ¬å·è‡³ `3.0.0.12`ã€‚

