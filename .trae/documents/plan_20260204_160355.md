## 1. 修复数据竞争 (Fix Data Race Condition)
- **诊断**: `injectFolderUI` 执行过早，早于 `loadData` 完成，导致初次渲染为空。
- **修改文件**: `content_gemini.js`
- **操作**: 
    - 引入一个全局标志位 `isDataLoaded = false`。
    - 在 `loadData()` 完成后设置 `isDataLoaded = true`。
    - 在 `injectFolderUI` 中，如果 `!isDataLoaded`，则暂停执行或仅渲染骨架（等待数据回调）。
    - **更优解**: 将 `init` 流程改为 Promise 链式调用：`loadData().then(startObservers)`.

## 2. 纯化共享 Gem 判定 (Purify Shared Logic)
- **诊断**: v28 引入的状态管理过于复杂，可能在页面跳转间隙误删了状态。
- **修改文件**: `content_gemini.js`
- **操作**:
    - 在 `renderSharedGems` 中，优先使用 `window.location.href.includes('usp=sharing')` 作为判定依据。
    - 只有当 URL 参数确实不存在时，才回退去查 Session Storage。
    - **关键**: 移除那些可能导致误判的“自动清理 Session”代码，确保状态的稳定性。

## 3. 版本发布
- 升级版本号至 **3.0.0.33**。
- 更新 CHANGELOG.md。
- 打包生成 zip。